<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Lo-Fi Typing Challenge</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: #0f172a;
      color: #e5e7eb;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      overflow-x: hidden;
      position: relative;
    }

    /* Video background */
    #bgVideo {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: brightness(0.35);
      z-index: -2;
      pointer-events: none;
    }

    .overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, rgba(15,23,42,0.6), rgba(2,6,23,0.96));
      z-index: -1;
      pointer-events: none;
    }

    .container {
      max-width: 960px;
      width: 100%;
      padding: 24px 16px 40px;
      box-sizing: border-box;
    }

    h1 {
      font-size: 26px;
      margin: 0 0 12px;
      color: #38bdf8;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      text-shadow: 0 4px 18px rgba(0,0,0,0.85);
    }

    /* Player */
    .player {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(7,11,22,0.98);
      border: 1px solid rgba(148,163,253,0.35);
      margin-bottom: 18px;
      box-shadow: 0 14px 40px rgba(4,7,16,0.9);
      backdrop-filter: blur(10px);
    }

    .player-label {
      font-size: 10px;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    .player-btn {
      width: 30px;
      height: 30px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #38bdf8;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 0;
      transition: transform 0.12s ease, box-shadow 0.12s ease;
    }

    .player-btn span {
      display: block;
      width: 0;
      height: 0;
      border-style: solid;
      border-width: 7px 0 7px 11px;
      border-color: transparent transparent transparent #0f172a;
      margin-left: 2px;
    }

    .player-btn.pause span {
      width: 11px;
      height: 11px;
      border: none;
      display: flex;
      justify-content: space-between;
    }

    .player-btn.pause span::before,
    .player-btn.pause span::after {
      content: "";
      width: 3px;
      height: 11px;
      background: #0f172a;
      border-radius: 1px;
    }

    .player-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 14px rgba(56,189,248,0.35);
    }

    .player-small-btn {
      width: 26px;
      height: 26px;
      font-size: 13px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,253,0.5);
      background: transparent;
      color: #9ca3af;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.12s ease;
    }

    .player-small-btn:hover {
      color: #e5e7eb;
      border-color: #38bdf8;
    }

    #playerStatus {
      font-size: 10px;
      color: #9ca3af;
    }

    /* Layout */
    .layout {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 18px;
      align-items: flex-start;
    }

    @media (max-width: 800px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }

    /* Game box */
    .game-box {
      background: rgba(6,10,19,0.98);
      border-radius: 18px;
      padding: 16px 14px 16px;
      border: 1px solid rgba(75,85,99,0.95);
      box-shadow: 0 16px 36px rgba(0,0,0,0.95);
      backdrop-filter: blur(10px);
    }

    .label {
      font-size: 10px;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      margin-bottom: 4px;
    }

    #promptText {
      font-size: 14px;
      line-height: 1.6;
      color: #d1d5db;
      background: rgba(7,11,19,0.98);
      padding: 9px;
      border-radius: 12px;
      border: 1px solid rgba(55,65,81,1);
      margin-bottom: 8px;
      min-height: 72px;
      white-space: pre-wrap;
    }

    .correct-char {
      color: #22c55e;
    }

    .incorrect-char {
      color: #f97316;
    }

    .typing-input {
      width: 100%;
      padding: 9px;
      font-size: 14px;
      border-radius: 12px;
      border: 1px solid #4b5563;
      background: #020817;
      color: #e5e7eb;
      outline: none;
      margin-bottom: 8px;
      box-sizing: border-box;
    }

    .typing-input:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56,189,248,0.25);
    }

    .buttons {
      display: flex;
      gap: 8px;
      margin-bottom: 6px;
    }

    .btn {
      padding: 6px 12px;
      font-size: 11px;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #38bdf8;
      color: #020817;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      transition: all 0.12s ease;
    }

    .btn.secondary {
      background: transparent;
      color: #9ca3af;
      border: 1px solid #4b5563;
      font-weight: 500;
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 14px rgba(56,189,248,0.35);
    }

    .btn.secondary:hover {
      box-shadow: 0 4px 14px rgba(75,85,99,0.6);
      color: #e5e7eb;
    }

    .stats {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 11px;
      color: #9ca3af;
      margin-top: 4px;
    }

    .stats span strong {
      color: #38bdf8;
      font-weight: 600;
    }

    #statusMessage {
      font-size: 10px;
      color: #6b7280;
      margin-top: 2px;
    }

    /* Sidebar / Leaderboard */
    .sidebar {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .panel {
      background: rgba(5,9,18,0.98);
      border-radius: 18px;
      padding: 10px;
      border: 1px solid rgba(55,65,81,1);
      box-shadow: 0 16px 32px rgba(0,0,0,0.98);
      backdrop-filter: blur(10px);
    }

    .panel h2 {
      font-size: 14px;
      margin: 0 0 4px;
      color: #e5e7eb;
    }

    .panel small {
      font-size: 9px;
      color: #6b7280;
    }

    #leaderboardList {
      list-style: none;
      padding: 0;
      margin: 6px 0 0;
      font-size: 11px;
      color: #9ca3af;
      max-height: 220px;
      overflow-y: auto;
    }

    #leaderboardList li {
      display: flex;
      justify-content: space-between;
      gap: 8px;
      padding: 4px 6px;
      border-radius: 9px;
      background: rgba(4,7,16,0.98);
      border: 1px solid rgba(31,41,55,0.95);
      margin-bottom: 4px;
    }

    #leaderboardList li .name {
      color: #e5e7eb;
      font-weight: 500;
    }

    #leaderboardList li .score {
      color: #38bdf8;
      font-weight: 600;
      white-space: nowrap;
    }
  </style>
</head>
<body>
  <!-- Background video -->
  <video id="bgVideo" autoplay muted loop playsinline>
    <source src="waterdrops.mp4" type="video/mp4">
  </video>
  <div class="overlay"></div>

  <div class="container">
    <h1>Lo-Fi Typing Challenge</h1>

    <!-- Audio player -->
    <div class="player">
      <div class="player-label">Lo-Fi Mix</div>
      <button class="player-btn" id="playPauseBtn"><span></span></button>
      <button class="player-small-btn" id="nextTrackBtn">⟳</button>
      <div id="playerStatus">Stopped</div>
      <audio id="bgAudio" preload="auto"></audio>
    </div>

    <div class="layout">
      <!-- Typing Game -->
      <div class="game-box">
        <div class="label">Prompt</div>
        <div id="promptText"></div>

        <input
          id="typingInput"
          class="typing-input"
          autocomplete="off"
          placeholder="Press Start, then type exactly what you see..."
        />

        <div class="buttons">
          <button class="btn" id="startBtn">Start</button>
          <button class="btn secondary" id="resetBtn">Reset</button>
        </div>

        <div class="stats">
          <span>Time: <strong id="timeDisplay">0.00s</strong></span>
          <span>WPM: <strong id="wpm">0</strong></span>
          <span>Accuracy: <strong id="accuracy">0%</strong></span>
          <span>Best: <strong id="bestScore">0 WPM</strong></span>
        </div>
        <div id="statusMessage"></div>
      </div>

      <!-- Leaderboard -->
      <div class="sidebar">
        <div class="panel">
          <h2>High Score Board</h2>
          <small>Top WPM from finished prompts (saved in this browser).</small>
          <ul id="leaderboardList"></ul>
        </div>
      </div>
    </div>
  </div>

<script>
/* ===========================
   Lo-Fi Audio Player
   =========================== */
const audioFiles = ["lofi1.mp3","lofi2.mp3","lofi3.mp3","lofi4.mp3","lofi5.mp3","lofi6.mp3","lofi7.mp3","lofi8.mp3","lofi9.mp3","lofi10.mp3"
];
const bgAudio = document.getElementById("bgAudio");
const playPauseBtn = document.getElementById("playPauseBtn");
const nextTrackBtn = document.getElementById("nextTrackBtn");
const playerStatusEl = document.getElementById("playerStatus");

let currentTrackIndex = -1;
let isPlaying = false;

function pickRandomTrack(exclude) {
  if (audioFiles.length === 1) return 0;
  let idx;
  do {
    idx = Math.floor(Math.random() * audioFiles.length);
  } while (idx === exclude);
  return idx;
}

function loadTrack(index) {
  currentTrackIndex = index;
  bgAudio.src = audioFiles[index];
}

async function playTrack() {
  try {
    if (currentTrackIndex === -1) {
      loadTrack(pickRandomTrack(-1));
    }
    await bgAudio.play();
    isPlaying = true;
    playPauseBtn.classList.add("pause");
    playerStatusEl.textContent = "Playing";
  } catch (e) {
    playerStatusEl.textContent = "Click play to start";
    console.error("Playback blocked or failed:", e);
  }
}

function pauseTrack() {
  bgAudio.pause();
  isPlaying = false;
  playPauseBtn.classList.remove("pause");
  playerStatusEl.textContent = "Paused";
}

playPauseBtn.addEventListener("click", () => {
  if (!isPlaying) playTrack();
  else pauseTrack();
});

nextTrackBtn.addEventListener("click", () => {
  const next = pickRandomTrack(currentTrackIndex);
  loadTrack(next);
  if (isPlaying) playTrack();
});

bgAudio.addEventListener("ended", () => {
  const next = pickRandomTrack(currentTrackIndex);
  loadTrack(next);
  playTrack();
});

bgAudio.addEventListener("error", () => {
  console.error("Audio load error. Tried:", bgAudio.src);
  playerStatusEl.textContent = "Audio error";
});

/* ===========================
   Prompts (110 merged)
   =========================== */
const prompts = [
  "I keep my focus sharp while the lo fi drums tap in the background, zoning into the keys like it is second nature and the whole room fades out.",
  "The rhythm in my headphones keeps me calm while my fingers race across the keyboard, matching the kick and snare like they rehearsed it.",
  "Neon glow on the desk, soft static in my ears, and a paragraph daring me to miss a single letter while the timer ticks down in my head.",
  "I treat every line like a rep in the gym, smooth form, no wasted motion, just clean execution stacked on top of yesterday.",
  "Late night silence, slow piano loops, and the soft hum of the screen turning practice into something that feels strangely cinematic.",
  "Steady hands and slower breathing while the beat loops forever, reminding me that discipline is just focus stretched out over time.",
  "The track flips but the concentration does not, and every correct word feels like another quiet win nobody can take away.",
  "Calm mind, loud goals, fingers floating over the keys like I already know I am not stopping at average.",
  "Coffee half cold, track on repeat, and I am still here refining the same simple skill until it looks unfair.",
  "Keys clicking in sync with the hi hats, like the keyboard decided to be an instrument too.",
  "The lo fi crackle feels like white noise armor against every distraction trying to pull me out of the zone.",
  "Screen glow on my hands, quiet room, stubborn focus; this is what actually leveling up looks like.",
  "I scroll past the chaos, hit play on a mellow loop, and type like I am clocking in to my own future.",
  "Every round is a clean slate: no one cares what I typed last time, only how sharp I am right now.",
  "The small details add up: one more clean line, one more accurate word, one more reason I am not like everyone who quits.",
  "I treat this paragraph like a contract with myself: no shortcuts, no excuses, just letters that do what they are told.",
  "I type like the keyboard owes me money, but every keypress still lands clean and on beat.",
  "Each line I finish feels like I am politely bullying my future self into being more talented.",
  "My typos show up, get corrected, and leave humbled, like they were never invited to the session.",
  "The cursor blinks like it is judging me, but I turn that pressure into accuracy instead of drama.",
  "I am not racing strangers on the internet, I am racing the lazy version of me that still thinks scrolling counts as effort.",
  "Hands steady, brain locked in, background track soft enough to let my focus talk louder.",
  "I type this like someone is recording the stats, because someone is: me, and I am petty about improvement.",
  "I let the sentence stretch out longer than my excuses, just to prove which one actually finishes.",
  "I correct my mistakes so fast they do not even get a full cameo in this paragraph.",
  "The letters line up like soldiers, except friendlier and slightly more sarcastic.",
  "I am not here to mash keys; I am here to make the keyboard consider filing a performance review.",
  "This practice feels like standup for my fingers: tight timing, no stumbling, no flop sweat.",
  "My typing speed is that awkward kid that suddenly came back from summer extremely confident.",
  "If focus was a superpower, this would be my mildly underrated origin story.",
  "I type like the Wi-Fi is one second from dropping forever and this is my last transmission.",
  "I am calm, composed, and typing like autocorrect retired out of respect.",
  "The only thing lagging right now is my doubt, and it is getting left behind sentence by sentence.",
  "If discipline had a soundtrack, it would be this beat and this exact paragraph.",
  "I fix mistakes without panicking, like I have patched this timeline a thousand times already.",
  "My brain and fingers are finally on speaking terms, and apparently they both like precision.",
  "Half of this prompt is practice, the other half is proof that I showed up.",
  "If someone read this line, they would think I always type this clean, and I allow that delusion.",
  "I hit these keys like a locksmith, each press unlocking the next line of proof I am getting better.",
  "My keyboard has seen confusion, chaos, and emotional emails; this is the first time it sees discipline.",
  "I am not typing to impress strangers, I am typing so future me looks back and says, that was the moment.",
  "I treat commas and periods with respect, like tiny traffic lights for my runaway thoughts.",
  "This whole exercise is just my attention span doing pushups in public.",
  "Every correct letter is a tiny disrespectful comment toward my old bad habits.",
  "I am not nervous about messing up; I am interested in how fast I fix it.",
  "The beat is soft, my concentration is not, and every word lands like it rehearsed for this.",
  "I move through this prompt like a quiet mic drop stretched into a paragraph.",
  "If focus could talk, it would sound like this: calm, consistent, slightly tired of excuses.",
  "I am typing like there is a crowd watching, but the only witness is this high score box.",
  "I let my fingers cook while my brain quietly fact-checks every letter.",
  "This line exists purely to remind me I chose progress instead of another mindless scroll.",
  "I missed a letter, corrected it instantly, and kept going like a professional typo assassin.",
  "Some people manifest with vision boards; I manifest with clean keystrokes and petty WPM goals.",
  "There is a version of me that never started practicing; this paragraph is written to embarrass him.",
  "I am not overthinking this; I am over-delivering one letter at a time.",
  "If my focus drops, the paragraph does not; it is built to expose hesitation.",
  "The funniest part is I once thought this kind of consistency was for other people.",
  "My accuracy is not perfect, but it is definitely outpacing my excuses.",
  "I press each key like I am signing paperwork for a better timeline.",
  "If this paragraph had a flavor, it would taste like quiet revenge on procrastination.",
  "I type like someone’s watching but it’s just my reflection wondering when I became this focused.",
  "My keyboard deserves a raise for handling this level of emotional typing.",
  "Confidence is just typing fast and hoping the autocorrect is on your side.",
  "This paragraph has seen more edits than my dating profile.",
  "Some people meditate, I just argue with typos until one of us gives up.",
  "My backspace key is working overtime, someone call HR.",
  "I type with purpose, but my spelling is on vacation.",
  "Every time I type 'definitely', it comes out 'defiantly', which feels poetic somehow.",
  "The letters don’t care about your feelings, they just want to be in the right order.",
  "I type like a hacker in a movie but with less confidence and more snacks.",
  "Each correct word feels like a small moral victory over chaos.",
  "If productivity had a soundtrack, it would be me aggressively typing to lofi beats.",
  "My typing style is part poetry, part panic.",
  "I’m not typing fast, I’m just panicking efficiently.",
  "This paragraph doesn’t need to be perfect, it just needs to survive me.",
  "I type like I’m trying to convince my keyboard I deserve another chance.",
  "Half my motivation comes from spite and the other half from caffeine.",
  "Autocorrect left me for someone who types better.",
  "Every typo is just a personality trait at this point.",
  "The keyboard clicks are my therapy, cheaper and louder than actual therapy.",
  "I could be out socializing, but no, I’m here trying to outtype my insecurities.",
  "My computer fan starts spinning like it’s cheering me on or warning me.",
  "Every sentence I finish feels like closing an emotional tax form.",
  "My thoughts are in 4K but my typing accuracy is 240p.",
  "The trick to confidence is typing quickly enough to not realize you’re wrong.",
  "This sentence is brought to you by three missed keystrokes and one fragile ego.",
  "I type like every word owes me money.",
  "The lo-fi beat makes my mistakes sound intentional.",
  "Every keypress feels like I’m gently punching anxiety in the face.",
  "If speed killed, I’d be on a typing watchlist.",
  "My keyboard’s letters are fading like my social skills.",
  "There’s rhythm in mistakes if you hit them with confidence.",
  "I tell myself it’s about progress, but secretly I just want to destroy my last WPM record.",
  "Typing fast is the closest thing I have to superpowers.",
  "They said ‘type your feelings’ — now my keyboard’s in therapy.",
  "My motivation left hours ago, but my fingers didn’t get the memo.",
  "Every missed letter is a reminder I’m human — but not a good one.",
  "Focus so deep, my neighbors think I’m hacking NASA.",
  "I type like I’m narrating a motivational montage no one asked for.",
  "There’s nothing like the rush of finishing a sentence without a single typo.",
  "The sound of my keyboard is the closest thing I have to applause.",
  "This prompt isn’t just words, it’s cardio for my confidence.",
  "My brain is poetry, my fingers are chaos, and my monitor is a witness.",
  "The spacebar and I are in a codependent relationship.",
  "I type like each keystroke is a confession.",
  "I’m not addicted to typing — I just can’t stand my own silence.",
  "Perfection is overrated; let’s just see how fast I can mess this up.",
  "My attention span is shorter than this sentence — oh wait, never mind.",
  "Some type for clarity, I type to drown out my own thoughts.",
  "Every paragraph I finish deserves a standing ovation and a snack break.",
  "If poetry had a mechanical keyboard, this would be its warm-up."
];

/* ===========================
   Typing Logic
   =========================== */
const typingInput = document.getElementById("typingInput");
const promptText = document.getElementById("promptText");
const startBtn = document.getElementById("startBtn");
const resetBtn = document.getElementById("resetBtn");
const wpmEl = document.getElementById("wpm");
const accuracyEl = document.getElementById("accuracy");
const bestScoreEl = document.getElementById("bestScore");
const timeDisplayEl = document.getElementById("timeDisplay");
const statusMessageEl = document.getElementById("statusMessage");

let currentPrompt = "";
let roundActive = false;
let startTime = null;

function pickPrompt() {
  const index = Math.floor(Math.random() * prompts.length);
  currentPrompt = prompts[index];
  renderPrompt("");
}

function renderPrompt(typed) {
  let html = "";
  for (let i = 0; i < currentPrompt.length; i++) {
    const expected = currentPrompt[i];
    if (i < typed.length) {
      const actual = typed[i];
      if (actual === expected) {
        html += `<span class="correct-char">${expected}</span>`;
      } else {
        html += `<span class="incorrect-char">${expected}</span>`;
      }
    } else {
      html += `<span>${expected}</span>`;
    }
  }
  promptText.innerHTML = html;
}

function resetRound() {
  roundActive = false;
  startTime = null;
  typingInput.disabled = false;
  typingInput.value = "";
  wpmEl.textContent = "0";
  accuracyEl.textContent = "0%";
  timeDisplayEl.textContent = "0.00s";
  statusMessageEl.textContent = "";
  pickPrompt();
  typingInput.focus();
}

function finishRound() {
  if (!roundActive || !startTime) return;
  roundActive = false;

  const endTime = performance.now();
  const typed = typingInput.value;
  const elapsedSeconds = (endTime - startTime) / 1000;
  const minutes = elapsedSeconds > 0 ? elapsedSeconds / 60 : 1 / 60;

  const promptWords = currentPrompt.trim().split(/\s+/).length;
  let wpm = Math.round(promptWords / minutes);
  if (!Number.isFinite(wpm) || wpm < 0) wpm = 0;

  let correctChars = 0;
  const compareLen = Math.min(typed.length, currentPrompt.length);
  for (let i = 0; i < compareLen; i++) {
    if (typed[i] === currentPrompt[i]) correctChars++;
  }
  const accuracy = typed.length
    ? Math.max(0, Math.round((correctChars / typed.length) * 100))
    : 0;

  typingInput.disabled = true;
  timeDisplayEl.textContent = elapsedSeconds.toFixed(2) + "s";
  wpmEl.textContent = String(wpm);
  accuracyEl.textContent = accuracy + "%";
  statusMessageEl.textContent = "Round complete. Prompt finished; stats locked.";

  handleLeaderboard(wpm);
  updateBestScoreDisplay();
}

startBtn.addEventListener("click", () => {
  resetRound();
  roundActive = true;
});

resetBtn.addEventListener("click", resetRound);

typingInput.addEventListener("input", () => {
  if (!roundActive) return;

  const typed = typingInput.value;

  if (!startTime && typed.length > 0) {
    startTime = performance.now();
    statusMessageEl.textContent = "Typing...";
  }

  renderPrompt(typed);

  if (typed.length >= currentPrompt.length) {
    finishRound();
  }
});

/* Initialize first prompt */
pickPrompt();

/* ===========================
   Leaderboard
   =========================== */
const LEADERBOARD_KEY = "lofi_typing_leaderboard_v1";
const MAX_ENTRIES = 10;
const leaderboardList = document.getElementById("leaderboardList");

function loadLeaderboard() {
  try {
    const raw = localStorage.getItem(LEADERBOARD_KEY);
    if (!raw) return [];
    const parsed = JSON.parse(raw);
    if (!Array.isArray(parsed)) return [];
    return parsed
      .filter(e => typeof e.name === "string" && typeof e.score === "number")
      .sort((a, b) => b.score - a.score)
      .slice(0, MAX_ENTRIES);
  } catch {
    return [];
  }
}

function saveLeaderboard(entries) {
  try {
    localStorage.setItem(LEADERBOARD_KEY, JSON.stringify(entries));
  } catch {
    // ignore storage errors
  }
}

function renderLeaderboard() {
  const entries = loadLeaderboard();
  leaderboardList.innerHTML = "";

  if (entries.length === 0) {
    const li = document.createElement("li");
    li.textContent = "No scores yet. Finish a prompt.";
    leaderboardList.appendChild(li);
    return;
  }

  entries.forEach((entry, idx) => {
    const li = document.createElement("li");
    const nameSpan = document.createElement("span");
    const scoreSpan = document.createElement("span");
    nameSpan.className = "name";
    scoreSpan.className = "score";
    nameSpan.textContent = (idx + 1) + ". " + entry.name;
    scoreSpan.textContent = entry.score + " WPM";
    li.appendChild(nameSpan);
    li.appendChild(scoreSpan);
    leaderboardList.appendChild(li);
  });
}

function handleLeaderboard(score) {
  if (!Number.isFinite(score) || score <= 0) return;
  const entries = loadLeaderboard();
  const lowest = entries.length < MAX_ENTRIES
    ? 0
    : entries[entries.length - 1].score;

  if (score > lowest) {
    const name = prompt("New high score! Enter a name to post on the board:");
    const cleanName = (name || "Anonymous").trim().slice(0, 20);
    if (cleanName) {
      entries.push({ name: cleanName, score });
      const sorted = entries
        .sort((a, b) => b.score - a.score)
        .slice(0, MAX_ENTRIES);
      saveLeaderboard(sorted);
      renderLeaderboard();
    }
  }
}

function updateBestScoreDisplay() {
  const entries = loadLeaderboard();
  if (!entries.length) {
    bestScoreEl.textContent = "0 WPM";
  } else {
    bestScoreEl.textContent = entries[0].score + " WPM";
  }
}

renderLeaderboard();
updateBestScoreDisplay();
</script>
</body>
</html>
